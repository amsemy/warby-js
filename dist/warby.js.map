{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 208a8d2aa25d32b140b0","webpack:///external {\"commonjs\":\"backbone\",\"commonjs2\":\"backbone\",\"amd\":\"backbone\",\"root\":\"Backbone\"}","webpack:///./ValidityStatus.js","webpack:///./Widget.js","webpack:///./template.js","webpack:///external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}","webpack:///external {\"commonjs\":\"underscore\",\"commonjs2\":\"underscore\",\"amd\":\"underscore\",\"root\":\"_\"}","webpack:///./Form.js","webpack:///./Service.js","webpack:///./View.js","webpack:///./restyProvider.js","webpack:///./main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA,+C;;;;;;;ACAA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,QAAQ;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,QAAQ;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,QAAQ;AAC7C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACzMA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA,eAAe,OAAO;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACvCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,gBAAgB,OAAO;AACvB;AACA,gBAAgB,OAAO;AACvB;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,8CAA8C;AAC9C;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,UAAU;AACvD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2DAA2D,SAAS;AACpE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,gBAAgB,OAAO;AACvB;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpLA,+C;;;;;;ACAA,+C;;;;;;;ACAA;;AAEA;AACA;;AAEA,8BAA8B,yBAAyB,gCAAgC,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,iCAAiC,GAAG;;AAEnK;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC,QAAQ;AAC7C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAqC,QAAQ;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA,kCAAkC;AAClC,oDAAoD;AACpD;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AClNA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,cAAc;AAC1B;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;AC/BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA,0C","file":"warby.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"backbone\"), require(\"jquery\"), require(\"underscore\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"backbone\", \"jquery\", \"underscore\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Warby\"] = factory(require(\"backbone\"), require(\"jquery\"), require(\"underscore\"));\n\telse\n\t\troot[\"Warby\"] = factory(root[\"Backbone\"], root[\"jQuery\"], root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 208a8d2aa25d32b140b0","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"backbone\",\"commonjs2\":\"backbone\",\"amd\":\"backbone\",\"root\":\"Backbone\"}\n// module id = 0\n// module chunks = 0 1","'use strict';\n\nvar _ = require(\"underscore\"),\n    Backbone = require(\"backbone\");\n\n// Статус валидации\n// ----------------\nvar ValidityStatus = function() {\n\n    // Упрощённая модель статуса валидации формы для связывания с\n    // представлением при помощи Rivets.\n    this.model = new Backbone.Model({\n        $invalid: false,\n        $valid: true\n    });\n\n    // Статус валидации полей.\n    //\n    //  status: {\n    //      __self__: [\n    //          hasErrA: true,\n    //          hasErrB: false,\n    //          invalid: true,\n    //          valid: false\n    //      ],\n    //      foo: {\n    //          __self__: [\n    //              hasErrС: false,\n    //              invalid: false,\n    //              valid: true\n    //          ],\n    //          bar: {\n    //              __self__: [\n    //                  hasErrD: true,\n    //                  invalid: true,\n    //                  valid: false\n    //              ]\n    //          }\n    //      }\n    //  }\n    this.status = {\n        __self__: {\n            invalid: false,\n            valid: true\n        }\n    };\n};\n\n// Для полей, перечисленных в ошибках `errors`, выставляет флаг\n// невалидности с именем `flag`. Если указан путь `base`, то он будет\n// добавлен к названию полей ошибок.\nValidityStatus.prototype.loadErrors = function(flag, errors, base) {\n    var path = [],\n        stack = [this.status];\n    if (base != null) {\n        var keys = base.split(\".\");\n        for (var i = 0, il = keys.length; i < il; i++) {\n            var key = keys[i];\n            if (key === \"\") {\n                throw new Error(\"Invalid base '\" + base + \"'\");\n            } else if (key === \"__self__\") {\n                throw new Error(\"Mustn't use '__self__' in base '\"\n                        + base + \"'\");\n            }\n            var val = stack[i];\n            val[key] = val[key] || {};\n            stack.push(val[key]);\n            path.push(key);\n        }\n    }\n    loadErrors(this, flag, stack.pop(), errors,\n            path.length ? path.join(\"_\") + \"_\" : \"\");\n    for (i = path.length - 1; i >= 0; i--) {\n        updateValidity(this, stack[i],\n                i ? path.slice(0, i).join(\"_\") + \"_\" : \"\");\n    }\n};\n\n// Убирает у всех полей флаги невалидности `flags`. Если указан путь\n// `base`, то обработаны будут только те поля, которые расположены по\n// этому пути.\nValidityStatus.prototype.removeErrors = function(flags, base) {\n    var path = [],\n        stack = [this.status];\n    if (!_.isArray(flags)) {\n        flags = [flags];\n    }\n    if (base != null) {\n        var keys = base.split(\".\");\n        for (var i = 0, il = keys.length; i < il; i++) {\n            var key = keys[i];\n            if (key === \"\") {\n                throw new Error(\"Invalid base '\" + base + \"'\");\n            } else if (key === \"__self__\") {\n                throw new Error(\"Mustn't use '__self__' in base '\"\n                        + base + \"'\");\n            }\n            var val = stack[i];\n            val[key] = val[key] || {};\n            stack.push(val[key]);\n            path.push(key);\n        }\n    }\n    removeErrors(this, flags, stack.pop(),\n            path.length ? path.join(\"_\") + \"_\" : \"\");\n    for (i = path.length - 1; i >= 0; i--) {\n        updateValidity(this, stack[i],\n                i ? path.slice(0, i).join(\"_\") + \"_\" : \"\");\n    }\n};\n\n// Устанавливает значение флага проверки валидности поля и рекурсивно\n// обновляет статус валидации родительских полей.\nValidityStatus.prototype.set = function(keypath, status) {\n    var keys = keypath.split(\".\"),\n        path = [],\n        stack = [this.status];\n    for (var i = 0, il = keys.length; i < il; i++) {\n        var key = keys[i];\n        if (key === \"\") {\n            throw new Error(\"Invalid keypath '\" + keypath + \"'\");\n        } else if (key === \"__self__\") {\n            throw new Error(\"Mustn't use '__self__' in keypath '\"\n                    + keypath + \"'\");\n        }\n        var val = stack[i];\n        if (i + 1 === il) {\n            val.__self__ = val.__self__ || {};\n            val.__self__[key] = status;\n            this.model.set(\n                    (i ? path.join(\"_\") + \"_$\" : \"$\") + key,\n                    status);\n            break;\n        } else {\n            val[key] = val[key] || {};\n        }\n        stack.push(val[key]);\n        path.push(key);\n    }\n    for (i = stack.length - 1; i >= 0; i--) {\n        updateValidity(this, stack[i],\n                i ? path.slice(0, i).join(\"_\") + \"_\" : \"\");\n    }\n};\n\nfunction loadErrors(vs, flag, val, err, attrpref) {\n    for (var key in err) {\n        if (key === \"__self__\") {\n            if (err.__self__.length) {\n                val.__self__ = val.__self__ || {};\n                val.__self__[flag] = true;\n                vs.model.set(attrpref + \"$\" + flag, true);\n            }\n        } else {\n            val[key] = val[key] || {};\n            loadErrors(vs, flag, val[key], err[key],\n                    attrpref + key + \"_\");\n        }\n    }\n    updateValidity(vs, val, attrpref);\n}\n\nfunction removeErrors(vs, flags, val, attrpref) {\n    for (var key in val) {\n        if (key === \"__self__\") {\n            for (var i = flags.length - 1; i >= 0; i--) {\n                var flag = flags[i];\n                delete val.__self__[flag];\n                vs.model.unset(attrpref + \"$\" + flag);\n            }\n        } else if (_.isObject(val[key])) {\n            removeErrors(vs, flags, val[key], attrpref + key + \"_\");\n        }\n    }\n    updateValidity(vs, val, attrpref);\n}\n\nfunction updateValidity(vs, val, attrpref) {\n    var key,\n        valid = true;\n    val.__self__ = val.__self__ || {};\n    for (key in val.__self__) {\n        if (key !== \"invalid\" && key !== \"valid\"\n                && val.__self__[key]) {\n            valid = false;\n        }\n    }\n    if (valid) {\n        for (key in val) {\n            if (key !== \"__self__\"\n                    && val[key].__self__.invalid) {\n                valid = false;\n            }\n        }\n    }\n    val.__self__.invalid = !valid;\n    val.__self__.valid = valid;\n    vs.model.set(attrpref + \"$invalid\", !valid);\n    vs.model.set(attrpref + \"$valid\", valid);\n}\n\nmodule.exports = ValidityStatus;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ValidityStatus.js\n// module id = 1\n// module chunks = 0 1","'use strict';\n\nvar $ = require(\"jquery\");\n\n/**\n * Параметры виджета.\n *\n * @namespace  Widget~Settings\n * @property  {String} name\n *            Имя виджета (id тега виджета).\n * @property  {String} constructor\n *            Функция-конструктор виджета.\n */\n\n/**\n * Создаёт виджет.\n *\n * @constructor\n * @param  {Widget~Settings} settings\n *         Параметры виджета.\n */\nvar Widget = function(settings) {\n    settings = (settings == null ? {} : settings);\n    if (settings.name == null || settings.name === \"\") {\n        throw new Error(\"Undefined 'settings.name' param\");\n    }\n    this.name = settings.name;\n};\n\n/**\n * Возвращает элемент, который содержит тело виджета.\n *\n * @returns  {jQuery}\n *           Объект jQuery.\n */\nWidget.prototype.getWidgetObj = function() {\n    return $(\"#\" + this.name);\n};\n\nmodule.exports = Widget;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Widget.js\n// module id = 2\n// module chunks = 0 1","'use strict';\n\nvar $ = require(\"jquery\");\n\n/**\n * Шаблонная страница.\n *\n * @namespace\n */\nvar template = {\n    __config: null,\n    __widgets: {}\n};\n\n/**\n * Создаёт виджет.\n *\n * @static\n * @param  {Widget~Settings} settings\n *         Параметры виджета.\n * @returns  Виджет.\n */\ntemplate.createWidget = function(settings) {\n    var name = settings.constructor;\n    if (name in this.__widgets) {\n        return new (template.__widgets[name])(settings);\n    } else {\n        throw new Error(\"Can't find widget '\" + name + \"'\");\n    }\n};\n\n/**\n * Возвращает адрес корня сайта. Если адрес не пустой, то проверяется,\n * чтобы он оканчивался на `/`.\n *\n * @static\n * @returns  {String}\n *           Корень адреса сайта.\n */\ntemplate.getBaseUrl = function() {\n    var base = $(\"base\").attr(\"href\") || \"\";\n    return (base && base.charAt(base.length - 1) !== \"/\"\n            ? base + \"/\" : base);\n};\n\n/**\n * Возвращает конфигурацию страницы.\n *\n * @returns  {Object}\n *           Объект конфигурации страницы.\n */\ntemplate.getConfig = function() {\n    if (this.__config == null) {\n        this.__config = JSON.parse($(\".template-config\").html());\n    }\n    return this.__config;\n};\n\n/**\n * Возвращает язык страницы.\n *\n * @returns  {String}\n *           Код языка.\n */\ntemplate.getLang = function() {\n    var lang = this.getConfig().lang;\n    return (lang == null ? \"en\" : lang);\n};\n\n/**\n * Отправляет на другую страницу.\n *\n * @static\n * @param  {Object} settings\n *         Параметры запроса:\n *           - {String} method\n *             Метод отправки формы - get или post.\n *           - {Object} params\n *             Объект, который содержит параметры запроса.\n *           - {String} url\n *             URL запроса. Параметр по умолчанию.\n */\ntemplate.directTo = function(settings) {\n    var method, params, url;\n    settings = (settings == null ? {} : settings);\n    if (settings instanceof Object) {\n        method = (settings.method == null ? \"get\" : settings.method);\n        params = (settings.params == null ? {} : settings.params);\n        url = (settings.url == null ? \"\" : settings.url);\n    } else {\n        method = \"get\";\n        params = {};\n        url = (settings == null ? \"\" : settings);\n    }\n    var formObj = $('<form class=\"hidden\" method=\"' + method\n            + '\" action=\"' + url + '\"></form>')\n        .appendTo($(\"body\"));\n    if (params instanceof Array) {\n        for (var p = 0, plen = params.length; p < plen; p++) {\n            formObj.append('<input name=\"' + params[p].name\n                    + '\" value=\"' + params[p].value + '\">');\n        }\n    } else {\n        for (var pname in params) {\n            if (params[pname] instanceof Array) {\n                for (var i = 0, len = params[pname].length; i < len; i++) {\n                    formObj.append('<input name=\"' + pname\n                            + '\" value=\"' + params[pname][i] + '\">');\n                }\n            } else {\n                formObj.append('<input name=\"' + pname\n                        + '\" value=\"' + params[pname] + '\">');\n            }\n        }\n    }\n    formObj.submit();\n};\n\n/**\n * Регистрирует виджет в шаблоне.\n *\n * @param  {String} name\n *         Имя виджета.\n * @param  {Widget} constr\n *         Конструктор виджета.\n */\ntemplate.registerWidget = function(name, constr) {\n    if (name in this.__widgets) {\n        throw new Error(\"Widget '\" + name + \"' has  already been registered\");\n    }\n    this.__widgets[name] = constr;\n};\n\n/**\n * Возвращает полный URL, добавляя в начало адрес корня сайта.\n *\n * @static\n * @param  {Object} settings\n *           - {String} adr\n *             Адрес запроса. Параметр по умолчанию. Если начинается\n *             со `/`, то URL будет рассчитан как `base` + `adr`.\n *           - {String} base\n *             Корень адреса сайта. Если не указан, то считывается из\n *             тэга `base`.\n *           - {Object} params\n *             Объект, который содержит параметры запроса.\n */\ntemplate.url = function(settings) {\n    var adr, base, params, url;\n    settings = (settings == null ? {} : settings);\n    if (settings instanceof Object) {\n        adr = (settings.adr == null ? \"\" : settings.adr);\n        base = (settings.base == null\n                ? template.getBaseUrl() : settings.base);\n        params = (settings.params == null\n                ? \"\" : $.param(settings.params));\n    } else {\n        adr = settings;\n        base = template.getBaseUrl();\n        params = \"\";\n    }\n    // Если `adr` начинается на `/`, то присоединить `base`, иначе\n    // использывать только `adr`\n    if (base != null && base !== \"\" && base !== \"/\"\n            && adr.charAt(0) === \"/\") {\n        // Избежать `//` при присоединении\n        if (base.charAt(base.length - 1) === \"/\") {\n            adr = adr.substring(1);\n        }\n        url = base + adr;\n    } else {\n        url = adr;\n    }\n    // Если URL уже содержит `?`, то параметры подставлять начиная с `&`\n    if (params) {\n        params = (url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + params;\n    }\n    return url + params;\n};\n\nmodule.exports = template;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./template.js\n// module id = 3\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}\n// module id = 4\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"underscore\",\"commonjs2\":\"underscore\",\"amd\":\"underscore\",\"root\":\"_\"}\n// module id = 5\n// module chunks = 0 1","'use strict';\n\nvar Backbone = require(\"backbone\");\nvar ValidityStatus = require(\"./ValidityStatus\");\n\nvar email = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n// Валидируемая форма\n// ------------------\nmodule.exports = Backbone.Model.extend({\n\n    // Инициализация модели.\n    constructor: function() {\n        Backbone.Model.apply(this, arguments);\n        var self = this;\n\n        // Обрабатывать изменение каждого поля формы отдельно.\n        for (var key in this.attributes) {\n            this.on(\"change:\" + key, getChangeHandler(key));\n        }\n\n        // Ошибки валидации из ответа сервиса.\n        this.errors = {};\n\n        // Обработчики событий синхронизации модели с сервером.\n        this.handlers = {\n            error: function(resp) {\n                if (resp && resp.errors) {\n                    self.errors = resp.errors;\n                    self.validityStatus.loadErrors(\n                            \"serviceValidity\", resp.errors);\n                } else {\n                    self.errors = {};\n                    self.validityStatus.set(\"serviceError\", true);\n                }\n            }\n        };\n\n        // Статус валидации формы.\n        this.validityStatus = new ValidityStatus();\n    },\n\n    // Убеждается, что значение является корректным email-адресом.\n    assertEmail: function(keypath, value) {\n        return this.makeValidation(keypath, email.test(value));\n    },\n\n    // Убеждается, что условие истинно и обновляет статус проверки\n    // валидности поля.\n    makeValidation: function(keypath, condition) {\n        this.validityStatus.set(keypath, !condition);\n        return condition;\n    },\n\n    // Валидирует форму.\n    // см. Backbone.Model.prototype.validate\n    validate: function() {\n        this.validityStatus.removeErrors(\n                [\"serviceError\", \"serviceValidity\"]);\n        this.errors = {};\n        if (this.validityStatus.status.__self__.invalid) {\n            return \"Form is invalid\";\n        }\n    }\n\n});\n\nfunction getChangeHandler(key) {\n    return function(model, value, options) {\n        var attrs = {};\n        attrs[key] = value;\n        model.validate(attrs, options);\n    };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Form.js\n// module id = 6\n// module chunks = 0 1","'use strict';\n\nvar _ = require(\"underscore\"),\n    Backbone = require(\"backbone\");\nvar template = require(\"./template\");\n\nvar Service = function() {};\n\n_.extend(Service.prototype, {\n\n    // URL сервиса.\n    url: null,\n\n    // Хэш-коллекция методов сервиса.\n    api: {},\n\n    // Вызывает метод сервиса.\n    apply: function(name, args) {\n        var apiMethod = getApiMethod(this, name);\n        if (apiMethod) {\n            return apiMethod.func.apply(this, args);\n        }\n    },\n\n    // Связывает модель/коллекцию с сервисом.\n    bind: function(model) {\n        if (model) {\n            model.service = this;\n            model.sync = function() {\n                return Service.sync.apply(this, arguments);\n            };\n        }\n    },\n\n    // Вызывает метод сервиса.\n    call: function(name) {\n        var apiMethod = getApiMethod(this, name);\n        if (apiMethod) {\n            if (arguments.length > 1) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                return apiMethod.func.apply(this, args);\n            } else {\n                return apiMethod.func.call(this);\n            }\n        }\n    },\n\n    // Callback `Service.provider(model, options)`, настраивает методы\n    // сервиса в процессе синхронизации.\n    provider: null\n\n});\n\n// Создаёт потомка сервиса.\nService.extend = Backbone.Model.extend;\n\n// Синхронизирует модель/коллекцию.\nService.sync = function(method, model, options) {\n    options || (options = {});\n\n    // Backbone при синхронизации передаёт параметр `method`. По нему\n    // находим в `model.apiMapping` имя метода сервиса. Если при\n    // синхронизации модели нужно использывать другой метод сервиса, то\n    // его можно указать через `options.apiMethod`.\n    if (options.apiMethod) {\n        method = options.apiMethod;\n    } else {\n        method = getApiMethodName(model, method);\n        if (!method) {\n            throw new Error(\"Unsupported sync method '\" + method + \"'\");\n        }\n    }\n    var apiMethod = getApiMethod(model.service, method);\n    if (!apiMethod) {\n        throw new Error(\"Unsupported API method '\" + method + \"'\");\n    }\n\n    // Выполнить специфичные для метода сервиса настройки.\n    var provider = (apiMethod.provider !== undefined\n            ? apiMethod.provider : model.service.provider);\n    if (provider) {\n        provider(model, options);\n    }\n\n    // Атрибуты модели. Для коллекции массив будет использован как\n    // объект.\n    var attrs = _.extend(model.toJSON(options), options.attrs);\n\n    var type = apiMethod.type;\n\n    // Получить URL с подстановкой аттрибутов модели в шаблон адреса\n    // запроса.\n    var url = getSyncUrl(model.service, attrs, apiMethod);\n\n    // Добавить параметры запроса в URL.\n    if (apiMethod.params) {\n        url = template.url({\n            adr: url,\n            base: \"\",\n            params: getParamsObj(attrs, apiMethod.params)\n        });\n    }\n\n    var defaults = {\n        dataType: \"json\",\n        type: type,\n        url: url\n    };\n\n    // Ensure that we have the appropriate request data.\n    if (options.data === undefined && model && (\n            type === \"POST\" || type === \"PUT\" || type === \"PATCH\")) {\n        defaults.contentType = \"application/json\";\n        defaults.data = JSON.stringify(\n                options.attrs || model.toJSON(options));\n        defaults.processData = false;\n    }\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(defaults, options));\n    model.trigger(\"request\", model, xhr, options);\n    return xhr;\n};\n\nfunction copyObjectValue(src, dest, keypath) {\n    var keys = keypath.split(\".\");\n    for (var i = 0, il = keys.length; i < il; i++) {\n        var key = keys[i];\n        if (i === il - 1) {\n            dest[key] = src[key];\n        } else {\n            dest[key] = dest[key] || {};\n            src = src[key];\n            dest = dest[key];\n        }\n    }\n}\n\nfunction getApiMethod(service, name) {\n    if (service.api) {\n        var apiMethod = service.api[name];\n        if (!apiMethod) {\n            apiMethod = getApiMethod(\n                    service.constructor.__super__, name);\n        }\n        return apiMethod;\n    }\n}\n\nfunction getApiMethodName(model, method) {\n    if (model.apiMapping) {\n        var name = model.apiMapping[method];\n        if (!name) {\n            name = getApiMethodName(\n                    model.constructor.__super__, method);\n        }\n        return name;\n    }\n}\n\nfunction getObjectValue(obj, keypath) {\n    var keys = keypath.split(\".\");\n    var val = obj;\n    for (var i = 0, il = keys.length; i < il; i++) {\n        val = val[keys[i]];\n    }\n    return val;\n}\n\nfunction getParamsObj(attrs, params) {\n    var result = {};\n    if (_.isArray(params)) {\n        for (var i = 0, il = params.length; i < il; i++) {\n            copyObjectValue(attrs, result, params[i]);\n        }\n    } else {\n        for (var key in params) {\n            result[params[key]] = getObjectValue(attrs, key);\n        }\n    }\n    return result;\n}\n\nfunction getSyncUrl(service, attrs, apiMethod) {\n    var syncUrl = service.url,\n        path = apiMethod.path;\n    if (path.length > 0) {\n        if (syncUrl.charAt(syncUrl.length - 1) === \"/\") {\n            syncUrl = syncUrl.substring(0, syncUrl.length - 1);\n        }\n        var paths = path.split(\"/\");\n        for (var i = 0, il = paths.length; i < il; i++) {\n            var p = paths[i], q;\n            if (p.charAt(0) === \"{\"\n                    && p.charAt(p.length - 1) === \"}\") {\n                q = getObjectValue(attrs, p.substring(1, p.length - 1));\n            } else {\n                q = p;\n            }\n            if (q.toString() !== \"\") {\n                syncUrl += \"/\" + encodeURIComponent(q);\n            }\n        }\n        if (path.charAt(path.length - 1) === \"/\") {\n            syncUrl += \"/\";\n        }\n    }\n    return syncUrl;\n}\n\nmodule.exports = Service;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./Service.js\n// module id = 7\n// module chunks = 0 1","'use strict';\n\nvar Widget = require(\"./Widget\");\n\n/**\n * Параметры представления.\n *\n * @namespace  View~Settings\n * @augments  Widget~Settings\n * @property  {String} [name=\"config-widget\"]\n *            Имя виджета (id тега виджета).\n */\n\n/**\n * Создаёт представление.\n *\n * @constructor\n * @augments  Widget\n * @param  {View~Settings} settings\n *         Параметры представления.\n */\nvar View = function(settings) {\n    settings = (settings == null ? {} : settings);\n    settings.name = (settings.name == null\n        ? \"content-widget\" : settings.name);\n    Widget.call(this, settings);\n};\n\nView.prototype = Object.create(Widget.prototype);\nView.prototype.constructor = View;\n\nmodule.exports = View;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./View.js\n// module id = 8\n// module chunks = 0 1","'use strict';\n\nmodule.exports = function(model, options) {\n    var success = options.success;\n    options.success = function(resp) {\n        switch (resp.status) {\n            case \"INVALID\":\n                if (options.error) {\n                    options.error(resp.errors);\n                }\n                break;\n            case \"SUCCESS\":\n                if (success) {\n                    success(resp.data);\n                }\n                break;\n            default:\n                if (options.error) {\n                    options.error();\n                }\n        }\n    };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./restyProvider.js\n// module id = 9\n// module chunks = 0 1","exports.Form = require(\"./Form\");\nexports.Service = require(\"./Service\");\nexports.ValidityStatus = require(\"./ValidityStatus\");\nexports.View = require(\"./View\");\nexports.Widget = require(\"./Widget\");\nexports.restyProvider = require(\"./restyProvider\");\nexports.template = require(\"./template\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./main.js\n// module id = 10\n// module chunks = 0 1"],"sourceRoot":""}